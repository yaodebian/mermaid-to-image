# Mermaid图表提取与转换 Chrome插件 - 需求文档

## 项目概述
开发一个Chrome插件，专注于从网页提取Mermaid图表为文本，以及将Mermaid文本转换为图片。解决用户在不支持Mermaid的平台上需要使用图表的问题，同时方便用户获取和复用优质Mermaid图表的源代码。

## 核心功能

### 1. Mermaid图表提取为文本
- 在浏览器侧边栏中显示当前页面识别到的所有Mermaid图表列表
- 每个图表项显示小预览图和复制按钮
- 点击复制按钮可立即复制对应的Mermaid文本到剪贴板
- 当页面不存在Mermaid图表时，显示相应提示信息
- 支持自动检测不同实现方式的Mermaid图表

### 2. Mermaid转图片
- 在新开的独立页面中提供左右布局的界面
- 左侧为编辑框，用于输入或粘贴Mermaid文本
- 右侧为预览框，实时渲染Mermaid图表
- 提供导出按钮，支持导出为多种图片格式（SVG、PNG、JPEG）
- 允许用户选择图片尺寸倍数（如1x、2x、3x等）
- 支持常用的Mermaid图表类型及语法

## 用户体验要求
- 简单直观：操作流程不超过三步
- 高效快速：快速识别页面上的Mermaid图表
- 准确可靠：正确提取Mermaid代码，保持原有格式
- 轻量级：插件不影响页面加载和浏览体验
- 独立界面：转图片功能使用独立页面，避免干扰当前页面

## 用户界面设计

### 侧边栏界面（提取功能）
- 简洁的顶部标题和说明
- Mermaid图表列表，按在页面中的顺序排列
- 每个列表项包含：
  - 小型预览图（显示图表缩略图）
  - 复制按钮（一键复制Mermaid文本）
  - 可选的展开按钮（查看更多详情）
- 底部显示检测统计信息（如"共检测到5个Mermaid图表"）
- 当无图表时显示友好提示："当前页面未检测到Mermaid图表"

### 转图片页面（独立页面）
- 左右分栏布局，各占50%宽度
- 左侧：
  - 带语法高亮的Mermaid文本编辑器
  - 常用图表类型模板按钮
- 右侧：
  - 实时预览区域
  - 导出选项（格式选择、尺寸倍数选择）
  - 导出按钮
- 顶部工具栏，包含：
  - 保存/加载功能
  - 主题切换
  - 帮助信息

## 目标用户
- 需要在不支持Mermaid的平台上使用图表的用户
- 希望复用他人创建的Mermaid图表的开发人员和文档作者
- 经常需要在不同平台间转移图表的技术人员
- 想要学习或参考他人Mermaid图表实现方式的学习者

## 技术约束
- 符合Chrome扩展的开发规范和安全策略
- 遵循Manifest V3的要求
- 使用最新版本的Mermaid库进行渲染
- 支持处理各种网页环境下的Mermaid图表
- 考虑跨域和内容安全策略(CSP)限制

## 成功标准
- 能准确识别至少90%的标准Mermaid图表
- 导出的图片质量清晰，大小适中
- 提取的代码与原始代码保持一致
- 用户操作步骤少于3步
- 实时预览响应时间不超过1秒
- 图表列表加载时间不超过2秒 